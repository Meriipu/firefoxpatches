From a9f185f72e82f26626ec546a7358d7afc20f9025 Mon Sep 17 00:00:00 2001
From: Meriipu <Meriipu@users.noreply.github.com>
Date: Fri, 17 Dec 2021 16:06:28 +0100
Subject: [PATCH 09/10] Stop resetting search engines on update

---
 toolkit/components/search/SearchService.jsm | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/toolkit/components/search/SearchService.jsm b/toolkit/components/search/SearchService.jsm
index c661cedfdcaf..87d541311e15 100644
--- a/toolkit/components/search/SearchService.jsm
+++ b/toolkit/components/search/SearchService.jsm
@@ -356,6 +356,10 @@ SearchService.prototype = {
         await this.removeEngine(engine);
         engineRemoved = true;
       }
+      else if (engine.name != "DuckDuckGo") {
+        await this.removeEngine(engine);
+        engineRemoved = true;
+      }
     }
     // If we've removed an engine, and we don't have any left, we need to
     // reload the engines - it is possible the settings just had one engine in it,
@@ -388,6 +392,9 @@ SearchService.prototype = {
     ) {
       return true;
     }
+    if (engine.name != "DuckDuckGo") {
+      return true;
+    }
     return false;
   },
 
-- 
2.38.0

